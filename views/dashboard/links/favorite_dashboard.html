{{define "fav_dashboard"}}
<!DOCTYPE html>
<html lang="en">
{{template "head" .}}

<body>
    <div class="flex min-h-screen w-full">
        {{template "sidebar"}}
        <div class="flex flex-1 flex-col">
            {{template "topnav" .User}}
            {{template "fav_dashboard_content" .Data}}
        </div>
    </div>
</body>

</html>
{{end}}

{{define "fav_dashboard_content"}}
<main class="flex-1 overflow-y-auto px-6">
    <section class="py-6">
        <div class="mb-4">
            <div class="flex items-center justify-between">
                <h2 class="text-xl font-semibold">My Favorites</h2>
                <div class="flex items-center gap-4">
                    <input
                        class="flex h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 w-72"
                        placeholder="Filter Favourites..." type="search" name="search"
                        hx-post="/dashboard/favourites" hx-trigger="input changed delay:500ms, search"
                        hx-target="#search-results" hx-indicator=".htmx-indicator">
                </div>
            </div>
        </div>
        <div class="relative w-full overflow-auto">
            <table class="w-full caption-bottom text-sm">
                {{template "link_table_header"}}
                <tbody class="[&amp;_tr:last-child]:border-0" id="search-results">
                    {{template "link_fav_table" .}}
                </tbody>
            </table>
        </div>
    </section>
</main>
{{end}}

{{define "link_fav_table"}}
    {{range .Links}}
    <tr id="link-{{.Id}}" class="border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted">
        <td class="p-4 align-middle [&amp;:has([role=checkbox])]:pr-0">
            <div class="font-medium">{{.Title}}</div>
        </td>
        <td class="p-4 align-middle [&amp;:has([role=checkbox])]:pr-0">
            <div class="text-gray-500 dark:text-gray-400">
                <a href="/link/{{.Id}}">{{.Url}}</a>
            </div>
        </td>
        <td class="p-4 align-middle [&amp;:has([role=checkbox])]:pr-0">
            <div class="line-clamp-2 text-gray-500 dark:text-gray-400">
                {{.Description}}
            </div>
        </td>
        <td class="p-4 align-middle [&amp;:has([role=checkbox])]:pr-0">
            <div class="flex items-center gap-2">
                <button hx-delete="/dashboard/favourites/{{.Id}}" hx-confirm="Are you sure you want to unfavorite this link?"
                    hx-target="#link-{{.Id}}" hx-swap="outerHTML:remove"
                    class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10">
                    {{template "delete_icon"}}
                </button>
            </div>
        </td>
    </tr>
    {{end}}
{{end}}